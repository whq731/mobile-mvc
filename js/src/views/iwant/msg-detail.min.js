define("jquery underscore backbone text!src/tpl/iwant/msg-detail.tpl text!src/tpl/iwant/header-normal.tpl src/views/iwant/pic-slide src/views/iwant/comment".split(" "),function(c,e,f,g,h,k,l){return f.View.extend({el:"body",template:e.template(g),originalsViewInstance:!1,events:{},showBigPic:function(a){window.location.href="#photo";window.photoActive=!0;a=c(a.currentTarget);var b={};b.imgLength=a.parent().children("li").length;b.imgList=[];for(var d=0;d<b.imgLength;d++)b.imgList.push(a.parent().children("li")[d].getAttribute("bigsrc"));
b.currentPic=a.attr("data-key");this.picSlide?(this.picSlide.myScroll=!1,this.picSlide.initialize({imgData:b})):this.picSlide=new k({imgData:b})},initialize:function(a){c(".loading").hide();this.undelegateEvents();c(window).off("scroll");this.message_id=a.msg_id;this.originalsViewInstance=a.originalsViewInstance;a=e.template(h,{title:"\u8be6\u60c5"});c("header").replaceWith(a);var b=this;ajax_request({action:"iwant_get_message_detail",message_id:this.message_id}).then(function(a){0<a.errorCode?showError(a.errorMsg):
(a.search_link=cfg.search_link,b.render(a))}).mobiCatch(function(a){console.log(a)});window.scrollTo(0,0)},render:function(a){pageSlider.slidePage(c(this.template(a)));var b={};b.topic_detail_info={original_id:a.original_id,canShare:!0,praise_count:a.praised_count,review_list:a.review_list,el:".center #comment_detail_"+a.original_id};1==a.is_delete&&(b.topic_detail_info.canShare=!1);e.isEmpty(a.image_list)?b.topic_detail_info.share_image="":b.topic_detail_info.share_image=a.image_list[0].big;new l(b);
var d=this;c(".onepic").tap(function(a){d.showBigPic(a)})}})});
