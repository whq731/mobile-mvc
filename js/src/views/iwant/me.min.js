define("jquery underscore backbone src/views/iwant/originals text!src/tpl/iwant/header-me.tpl text!src/tpl/iwant/me.tpl".split(" "),function(c,e,g,l,h,k){return g.View.extend({el:"body",template:e.template(k),originalsViewInstance:!1,page_size:cfg.page_size,events:{},initialize:function(d){this.page=1;this.hasMore=this.lock=!0;this.cust_id="";this.originalsViewInstance=d.originalsViewInstance;c(".loading").hide();var f={action:"iwant_get_user"};0<d.cust_id&&(this.cust_id=f.cust_id=d.cust_id);f.page=
this.page;f.page_size=this.page_size;var b=this;ajax_request(f).then(function(a){if(0==a.errorCode){c("#frame > .nocontent").remove();b.page++;b.lock=!1;var d=e.template(h,a.user_info);c("header").replaceWith(d);b.render(a);if(e.isEmpty(a.original_list)||a.original_list.length<b.pige_size)b.hasMore=!1;e.isEmpty(a.original_list)?c(".center#content").append('<div class="nocontent"></div>'):b.originalsViewInstance.initialize(a.original_list,2);0<a.user_info.new_msg_cnt&&100>a.user_info.new_msg_cnt?c(".i_header").html('<span class="dot">'+
a.user_info.new_msg_cnt+"</span>"):100<=a.user_info.new_msg_cnt&&c(".i_header").html('<span class="dot">99+</span>');return ajax_request({action:"iwant_get_new_message_flag"})}}).mobiCatch(function(a){showError(a.message)});c(window).off("scroll").on("scroll",function(){b.hasMore||c(window).off("scroll");!b.lock&&c(this).scrollTop()+c(this).height()>=c("body").height()&&b.hasMore&&(b.lock=!0,c(".loading").show(),ajax_request({action:"iwant_get_user_original_list",page:b.page,page_size:b.page_size,
cust_id:b.cust_id}).then(function(a){b.lock=!1;c(".loading").hide();a.errorCode&&0<a.errorCode?showError(a.errorMsg):(b.page++,0>=a.original_list.length?b.hasMore=!1:(a.original_list.length<b.page_size&&(b.hasMore=!1),b.originalsViewInstance.initialize(a.original_list,2)))}))})},render:function(d){pageSlider.slidePage(c(this.template(d)));window.scrollTo(0,0)}})});
